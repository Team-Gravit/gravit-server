-- =====================================================
-- Chapter 4: 데이터베이스 (ID: 4)
-- Unit 46: 외래키와 제약 조건
-- =====================================================

-- Lesson 1: 외래키와 제약 조건 1 (ID: 134)
INSERT INTO lesson (id, title, unit_id)
VALUES (134, '외래키와 제약 조건 1', 46);

INSERT INTO problem (id, lesson_id, instruction, content, problem_type)
VALUES (929, 134, '다음 중 외래키(Foreign Key)에 대한 설명으로 올바른 것은?', '외래키는 테이블 간의 관계를 정의하는 키이다.', 'OBJECTIVE'),
       (930, 134, '빈칸에 들어갈 용어를 작성하시오.', '외래키는 다른 테이블의 기본키 또는 고유키를 참조하여 ___을 보장한다.', 'SUBJECTIVE'),
       (931, 134, '다음 중 외래키의 특성으로 올바른 것은?', '외래키는 테이블 간 관계를 표현한다.', 'OBJECTIVE'),
       (932, 134, '다음 상황에서 발생하는 오류의 원인은?', '부서 테이블에 부서ID ''999''가 존재하지 않는데, 사원 테이블에 부서ID ''999''를 가진 사원을 삽입하려고 한다.', 'OBJECTIVE'),
       (933, 134, '빈칸에 들어갈 용어를 작성하시오.', '외래키 값이 참조하는 부모 테이블에 존재하지 않으면 삽입이나 수정이 제한되는 것을 ___ 제약이라고 한다.', 'SUBJECTIVE'),
       (934, 134, '다음 중 외래키에 대한 설명으로 올바르지 않은 것은?', '외래키는 참조 무결성을 보장하기 위해 사용된다.', 'OBJECTIVE'),
       (935, 134, '다음 상황에서 삭제가 실패하는 이유는?', '부서 테이블에서 부서ID ''10''을 삭제하려 하는데, 사원 테이블에 부서ID ''10''을 참조하는 사원이 존재한다.', 'OBJECTIVE');

INSERT INTO option (id, problem_id, content, explanation, is_answer)
VALUES
-- 문제 929
(2643, 929, '자신의 테이블 내에서만 사용된다', '외래키는 다른 테이블의 기본키 또는 고유키를 참조하여 테이블 간 관계를 정의한다.', false),
(2644, 929, '다른 테이블의 기본키 또는 고유키를 참조한다', '외래키(Foreign Key)는 다른 테이블의 기본키(PK) 또는 고유키(Unique Key)를 참조하는 속성 또는 속성들의 집합이다. 테이블 간의 관계를 표현할 때 사용한다.', true),
(2645, 929, '반드시 기본키여야 한다', '외래키는 기본키가 아니며, 다른 테이블의 기본키를 참조하는 것이다.', false),
(2646, 929, '중복된 값을 가질 수 없다', '외래키는 중복된 값을 가질 수 있다. 예를 들어 여러 사원이 같은 부서에 속할 수 있다.', false),

-- 문제 931
(2647, 931, 'NULL 값을 가질 수 없다', '외래키는 NULL 값을 가질 수 있다. 참조 관계가 없는 경우 NULL이 허용된다.', false),
(2648, 931, '하나의 테이블에 하나만 존재할 수 있다', '하나의 테이블에 여러 개의 외래키가 존재할 수 있다.', false),
(2649, 931, '참조되는 부모 테이블의 기본키 또는 고유키 값만 가질 수 있다', '외래키는 참조하는 부모 테이블의 기본키 또는 고유키에 존재하는 값이거나 NULL만 가질 수 있다. 이를 통해 참조 무결성이 보장된다.', true),
(2650, 931, '반드시 단일 속성으로 구성되어야 한다', '외래키는 복합 속성으로 구성될 수 있다. 부모 테이블의 복합 기본키를 참조할 수 있다.', false),

-- 문제 932
(2651, 932, '기본키 제약 위반', '기본키 제약은 해당 테이블 내에서 NULL 불가와 유일성에 관한 것이다.', false),
(2652, 932, '외래키 제약 위반', '외래키가 참조하는 부모 테이블에 해당 값이 존재하지 않으면 외래키 제약 위반이 발생한다. 부서ID ''999''가 부서 테이블에 없으므로 삽입이 실패한다.',
 true),
(2653, 932, 'NOT NULL 제약 위반', 'NOT NULL 제약은 NULL 값 삽입 시 발생한다. 이 경우는 ''999''라는 값이 있으므로 해당되지 않는다.', false),
(2654, 932, 'UNIQUE 제약 위반', 'UNIQUE 제약은 중복된 값 삽입 시 발생한다.', false),

-- 문제 934
(2655, 934, '하나의 테이블에 여러 개의 외래키가 존재할 수 있다', '하나의 테이블에 여러 개의 외래키가 존재할 수 있다. 예를 들어 주문 테이블이 고객과 상품을 모두 참조할 수 있다. 이는 올바른 설명이다.', false),
(2656, 934, 'NULL 값을 가질 수 있다', '외래키는 참조 관계가 없는 경우 NULL 값을 가질 수 있다. 이는 올바른 설명이다.', false),
(2657, 934, '참조되는 부모 테이블의 기본키 값만 가질 수 있다', '외래키는 부모 테이블의 기본키뿐만 아니라 고유키(Unique Key)도 참조할 수 있다.', true),
(2658, 934, '테이블 간의 관계를 표현한다', '외래키는 테이블 간의 관계를 정의하고 참조 무결성을 보장한다. 이는 올바른 설명이다.', false),

-- 문제 935
(2659, 935, '기본키 제약 때문에', '기본키 제약은 삭제와 직접적인 관련이 없다.', false),
(2660, 935, '외래키가 해당 값을 참조하고 있기 때문에', '부모 테이블의 행을 삭제하려면 해당 행을 참조하는 자식 테이블의 행이 없어야 한다. 사원이 부서ID ''10''을 참조하고 있으므로 삭제가 제한된다.', true),
(2661, 935, 'NOT NULL 제약 때문에', 'NOT NULL 제약은 NULL 값에 관한 것으로 삭제와 직접적인 관련이 없다.', false),
(2662, 935, 'UNIQUE 제약 때문에', 'UNIQUE 제약은 중복에 관한 것으로 삭제와 직접적인 관련이 없다.', false);

INSERT INTO answer (id, problem_id, content, explanation)
VALUES (267, 930, '참조 무결성, Referential Integrity', '외래키는 다른 테이블의 기본키 또는 고유키를 참조하여 참조 무결성(Referential Integrity)을 보장한다. 참조 무결성은 외래키 값이 참조하는 테이블의 기본키 값이거나 NULL이어야 함을 의미한다.'),
       (268, 933, '외래키, FK, Foreign Key', ' 외래키 제약은 자식 테이블의 외래키 값이 부모 테이블에 존재하지 않으면 삽입이나 수정을 제한한다.이를 통해 참조 무결성이 보장된다.');

-- Lesson 2: 외래키와 제약 조건 2 (ID: 135)
INSERT INTO lesson (id, title, unit_id)
VALUES (135, '외래키와 제약 조건 2', 46);

INSERT INTO problem (id, lesson_id, instruction, content, problem_type)
VALUES (936, 135, ' 다음 중 참조 동작 옵션 CASCADE에 대한 설명으로 올바른 것은 ? ', ' 참조 동작 옵션은 부모 테이블의 데이터가 삭제되거나 수정될 때 자식 테이블의 처리 방식을 지정한다
        .', 'OBJECTIVE'),
       (937, 135, ' 빈칸에 들어갈 참조 동작 옵션을 작성하시오.', ' 부모 삭제 시 자식의 외래키를 NULL로 설정하는 옵션은 ___이다.', 'SUBJECTIVE'),
       (938, 135, ' 다음 중 RESTRICT 옵션에 대한 설명으로 올바른 것은 ? ', ' RESTRICT는 참조 동작 옵션 중 하나이다.', 'OBJECTIVE'),
       (939, 135, ' 다음 SQL에서 ON DELETE CASCADE의 의미는 ? ', ' FOREIGN KEY (department_id) REFERENCES departments(department_id) ON DELETE CASCADE ', 'OBJECTIVE'),
       (940, 135, ' 빈칸에 들어갈 참조 동작 옵션을 작성하시오.', ' 부모 삭제 시 자식의 외래키를 기본값으로 설정하는 옵션은 ___이다.', 'SUBJECTIVE'),
       (941, 135, ' 다음 상황에서 적절한 참조 동작 옵션은 ? ', ' 회원이 탈퇴하면 해당 회원의 모든 주문 기록도 함께 삭제되어야 한다.', 'OBJECTIVE'),
       (942, 135, ' 다음 중 NO ACTION 옵션에 대한 설명으로 올바른 것은 ? ', ' NO ACTION은 참조 동작 옵션 중 하나이다.', 'OBJECTIVE');

INSERT INTO option (id, problem_id, content, explanation, is_answer)
VALUES
-- 문제 936
(2663, 936, ' 자식이 참조 중이면 부모 삭제 / 수정이 불가하다 ', ' 이것은 RESTRICT 옵션의 설명이다.', false),
(2664, 936, ' 부모 삭제 / 수정 시 자식의 외래키를 NULL로 설정한다 ', ' 이것은 SET NULL 옵션의 설명이다.', false),
(2665, 936, ' 부모 삭제 / 수정 시 자식도 함께 삭제 / 수정된다 ', ' CASCADE 옵션은 부모 테이블의 데이터가 삭제되거나 수정될 때 자식 테이블의 해당 데이터도 함께 삭제되거나 수정된다.', true),
(2666, 936, ' 부모 삭제 / 수정 시 자식의 외래키를 기본값으로 설정한다 ', ' 이것은 SET DEFAULT 옵션의 설명이다.', false),

-- 문제 938
(2667, 938, ' 부모 삭제 시 자식도 함께 삭제된다 ', ' 이것은 CASCADE 옵션의 설명이다.', false),
(2668, 938, ' 부모 삭제 시 자식의 외래키를 NULL로 설정한다 ', ' 이것은 SET NULL 옵션의 설명이다.', false),
(2669, 938, ' 자식이 참조 중이면 부모 삭제 / 수정이 불가하다 ', ' RESTRICT 옵션은 자식 테이블이 부모 테이블의 데이터를 참조하고 있으면 부모의 삭제나 수정을 허용하지 않는다.', true),
(2670, 938, ' 부모 삭제 시 아무 동작도 하지 않는다 ', ' RESTRICT는 삭제 / 수정을 차단한다.아무 동작도 하지 않는 것이 아니다.', false),

-- 문제 939
(2671, 939, ' departments 테이블의 행이 삭제되면 해당 행을 참조하는 자식 행의 외래키가 NULL이 된다 ', ' 이것은 ON DELETE SET NULL의 동작이다.', false),
(2672, 939, ' departments 테이블의 행이 삭제되면 해당 행을 참조하는 자식 행도 함께 삭제된다 ', ' ON DELETE CASCADE는 부모 테이블의 행이 삭제될 때 해당 행을 참조하는 자식 테이블의 행도 자동으로 삭제된다.', true),
(2673, 939, ' departments 테이블의 행이 삭제되면 삭제가 차단된다 ', ' 이것은 ON DELETE RESTRICT의 동작이다.', false),
(2674, 939, ' departments 테이블의 행 삭제와 관계없이 동작한다 ', ' ON DELETE는 부모 테이블의 삭제 시 동작을 정의한다.', false),

-- 문제 941
(2675, 941, ' SET NULL ', ' SET NULL은 외래키를 NULL로 설정하므로 주문 기록이 남아있게 된다.', false),
(2676, 941, ' RESTRICT ', ' RESTRICT는 삭제를 차단하므로 회원 탈퇴가 불가능해진다.', false),
(2677, 941, ' CASCADE ', ' 회원 탈퇴 시 모든 주문 기록도 함께 삭제되어야 하므로 CASCADE가 적절하다.부모(회원) 삭제 시 자식(주문) 도 함께 삭제된다.', true),
(2678, 941, ' SET DEFAULT ', ' SET DEFAULT는 외래키를 기본값으로 설정하므로 주문 기록이 남아있게 된다.', false),

-- 문제 942
(2679, 942, ' RESTRICT와 동일하게 동작한다 ', ' NO ACTION은 RESTRICT와 동일하게 자식이 참조 중이면 부모의 삭제 / 수정을 허용하지 않는다.', true),
(2680, 942, ' CASCADE와 동일하게 동작한다 ', ' NO ACTION은 자동 삭제 / 수정을 수행하지 않는다.', false),
(2681, 942, ' SET NULL과 동일하게 동작한다 ', ' NO ACTION은 외래키를 NULL로 설정하지 않는다.', false),
(2682, 942, ' 아무런 제약 없이 삭제 / 수정을 허용한다 ', ' NO ACTION도 참조 무결성을 검사하며, 위반 시 작업을 차단한다.', false);

INSERT INTO answer (id, problem_id, content, explanation)
VALUES (269, 937, 'SET NULL, NULL', 'SET NULL 옵션은 부모 테이블의 데이터가 삭제되거나 수정될 때 자식 테이블의 외래키 값을 NULL로 설정한다. 외래키 컬럼이 NULL을 허용해야 사용할 수 있다.'),
       (270, 940, 'SET DEFAULT, DEFAULT', 'SET DEFAULT 옵션은 부모 테이블의 데이터가 삭제되거나 수정될 때 자식 테이블의 외래키 값을 기본값(DEFAULT)으로 설정한다.');

-- Lesson 3: 외래키와 제약 조건 3 (ID: 136)
INSERT INTO lesson (id, title, unit_id)
VALUES (136, '외래키와 제약 조건 3', 46);

INSERT INTO problem (id, lesson_id, instruction, content, problem_type)
VALUES (943, 136, '다음 중 NOT NULL 제약에 대한 설명으로 올바른 것은?', 'NOT NULL은 일반 제약 조건 중 하나이다.', 'OBJECTIVE'),
       (944, 136, '빈칸에 들어갈 제약 조건을 작성하시오.', '해당 속성의 값이 고유(중복 불가능)해야 함을 보장하는 제약 조건은 ___이다.', 'SUBJECTIVE'),
       (945, 136, '다음 중 CHECK 제약에 대한 설명으로 올바른 것은?', 'CHECK는 특정 조건을 검사하는 제약 조건이다.', 'OBJECTIVE'),
       (946, 136, '다음 SQL의 DEFAULT 제약의 의미는?', 'CREATE TABLE products (id INT PRIMARY KEY, stock INT DEFAULT 0);
', 'OBJECTIVE'),
       (947, 136, '빈칸에 들어갈 내용을 작성하시오.', 'UNIQUE 제약이 적용된 컬럼은 중복된 값을 가질 수 없지만, ___ 값은 가질 수 있다.', 'SUBJECTIVE'),
       (948, 136, '다음 중 CHECK 제약의 올바른 사용 예시는?', 'CHECK 제약은 속성 값이 특정 조건을 만족해야 한다.', 'OBJECTIVE'),
       (949, 136, '다음 중 UNIQUE 제약과 기본키의 차이점으로 올바른 것은?', '둘 다 중복을 허용하지 않는다.', 'OBJECTIVE');

INSERT INTO option (id, problem_id, content, explanation, is_answer)
VALUES
-- 문제 943
(2683, 943, '해당 속성의 값이 중복되면 안 된다', '이것은 UNIQUE 제약의 설명이다.', false),
(2684, 943, '해당 속성에 NULL 값을 허용하지 않는다', 'NOT NULL 제약은 해당 속성에 NULL 값을 허용하지 않는다. 반드시 값이 존재해야 한다.', true),
(2685, 943, '해당 속성의 값이 특정 조건을 만족해야 한다', '이것은 CHECK 제약의 설명이다.', false),
(2686, 943, '값이 지정되지 않으면 기본값을 설정한다', '이것은 DEFAULT 제약의 설명이다.', false),

-- 문제 945
(2687, 945, '해당 속성에 NULL 값을 허용하지 않는다', '이것은 NOT NULL 제약의 설명이다.', false),
(2688, 945, '해당 속성의 값이 고유해야 한다', '이것은 UNIQUE 제약의 설명이다.', false),
(2689, 945, '해당 속성의 값이 특정 조건을 만족해야 한다', 'CHECK 제약은 해당 속성의 값이 특정 조건을 만족해야 함을 정의한다. 예를 들어 price > 0과 같은 조건을 지정할 수 있다.',
 true),
(2690, 945, '값이 지정되지 않으면 기본값을 설정한다', '이것은 DEFAULT 제약의 설명이다.', false),

-- 문제 946
(2691, 946, 'stock 컬럼에 NULL을 허용하지 않는다', '이것은 NOT NULL 제약의 동작이다.', false),
(2692, 946, 'stock 컬럼에 중복 값을 허용하지 않는다', '이것은 UNIQUE 제약의 동작이다.', false),
(2693, 946, 'stock 값이 지정되지 않으면 0으로 설정된다', 'DEFAULT 제약은 INSERT 시 해당 컬럼의 값이 지정되지 않으면 기본값을 자동으로 설정한다. 여기서는 0이 기본값이다.',
 true),
(2694, 946, 'stock 값이 0보다 커야 한다', '이것은 CHECK 제약의 동작이다.', false),

-- 문제 948
(2695, 948, 'CHECK (name IS NOT NULL)', 'NULL 검사는 NOT NULL 제약을 사용하는 것이 일반적이다.', false),
(2696, 948, 'CHECK (email UNIQUE)', 'UNIQUE는 별도의 제약 조건이며 CHECK 내에서 사용하지 않는다.', false),
(2697, 948, 'CHECK (price > 0)', 'CHECK 제약은 속성 값이 특정 조건을 만족해야 함을 정의한다. price > 0은 가격이 양수여야 한다는 조건이다.', true),
(2698, 948, 'CHECK (id = PRIMARY KEY)', 'PRIMARY KEY는 별도의 제약 조건이며 CHECK 내에서 사용하지 않는다.', false),

-- 문제 949
(2699, 949, 'UNIQUE는 NULL 값을 허용하고, 기본키는 NULL 값을 허용하지 않는다', 'UNIQUE 제약이 적용된 컬럼은 NULL 값을 가질 수 있지만, 기본키는 NOT NULL 제약이 함께 적용되어 NULL 값을 가질 수 없다.', true),
(2700, 949, 'UNIQUE는 테이블에 여러 개 지정할 수 없다', 'UNIQUE 제약은 테이블에 여러 개 지정할 수 있다.', false),
(2701, 949, '기본키는 중복 값을 허용한다', '기본키도 UNIQUE 제약이 적용되어 중복 값을 허용하지 않는다.', false),
(2702, 949, 'UNIQUE와 기본키는 동일하다', 'UNIQUE는 NULL을 허용하고 여러 개 지정 가능하지만, 기본키는 NULL 불가하고 테이블당 하나만 지정 가능하다.', false);

INSERT INTO answer (id, problem_id, content, explanation)
VALUES (271, 944, 'UNIQUE, 유니크', 'UNIQUE 제약은 해당 속성의 값이 고유(중복 불가능)해야 함을 보장하는 제약 조건이다. 기본키와 달리 NULL 값은 허용된다.'),
       (272, 947, 'NULL, 널', 'UNIQUE 제약이 적용된 컬럼은 중복된 값을 가질 수 없지만, NULL 값은 가질 수 있다. 이것이 기본키와의 주요 차이점이다. 기본키는 NOT NULL과 UNIQUE가 모두 적용된다.');
